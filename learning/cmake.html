<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Learning to Learn: CMake | systems++</title>
<meta name=keywords content="Learning to Learn,Programming,C++">
<meta name=description content="CMake is the de-facto C++ build system used by an overwhelming number of C++ projects. Even if you personally favor more modern alternatives such as Meson, Bazel, or Pants, if you ever pull in a 3rd party dependency, there is a good chance that it uses CMake so knowing enough about CMake to understand it is worth knowing.
How to get started I recommend new users to CMake start with the following resources:">
<meta name=author content="Robert Underwood">
<link rel=canonical href=http://robertu94.github.io/learning/cmake.html>
<meta name=google-site-verification content="G-9KQE44SX6K">
<link crossorigin=anonymous href=/assets/css/stylesheet.57f29198e62b3a8f07d37acaca0427bafb684416046b823f5a616bd858bb4af1.css integrity="sha256-V/KRmOYrOo8H03rKygQnuvtoRBYEa4I/WmFr2Fi7SvE=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.baa4f2053c75d0009e9309aae8f8a8959f5e0372e88f80cdf2951a9533d71ce2.js integrity="sha256-uqTyBTx10ACekwmq6PiolZ9eA3Loj4DN8pUalTPXHOI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://robertu94.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=http://robertu94.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=http://robertu94.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=http://robertu94.github.io/apple-touch-icon.png>
<link rel=mask-icon href=http://robertu94.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9KQE44SX6K"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-9KQE44SX6K',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Learning to Learn: CMake">
<meta property="og:description" content="CMake is the de-facto C++ build system used by an overwhelming number of C++ projects. Even if you personally favor more modern alternatives such as Meson, Bazel, or Pants, if you ever pull in a 3rd party dependency, there is a good chance that it uses CMake so knowing enough about CMake to understand it is worth knowing.
How to get started I recommend new users to CMake start with the following resources:">
<meta property="og:type" content="article">
<meta property="og:url" content="http://robertu94.github.io/learning/cmake.html"><meta property="article:section" content="learning">
<meta property="article:published_time" content="2022-11-15T05:00:00-05:00">
<meta property="article:modified_time" content="2022-11-15T05:00:00-05:00"><meta property="og:site_name" content="Systems++">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Learning to Learn: CMake">
<meta name=twitter:description content="CMake is the de-facto C++ build system used by an overwhelming number of C++ projects. Even if you personally favor more modern alternatives such as Meson, Bazel, or Pants, if you ever pull in a 3rd party dependency, there is a good chance that it uses CMake so knowing enough about CMake to understand it is worth knowing.
How to get started I recommend new users to CMake start with the following resources:">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Learning to Learn: CMake","item":"http://robertu94.github.io/learning/cmake.html"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Learning to Learn: CMake","name":"Learning to Learn: CMake","description":"CMake is the de-facto C++ build system used by an overwhelming number of C++ projects. Even if you personally favor more modern alternatives such as Meson, Bazel, or Pants, if you ever pull in a 3rd party dependency, there is a good chance that it uses CMake so knowing enough about CMake to understand it is worth knowing.\nHow to get started I recommend new users to CMake start with the following resources:","keywords":["Learning to Learn","Programming","C++"],"articleBody":"CMake is the de-facto C++ build system used by an overwhelming number of C++ projects. Even if you personally favor more modern alternatives such as Meson, Bazel, or Pants, if you ever pull in a 3rd party dependency, there is a good chance that it uses CMake so knowing enough about CMake to understand it is worth knowing.\nHow to get started I recommend new users to CMake start with the following resources:\n Mastering CMake is a high level overview of how to use CMake developed and maintained by the CMake Developers. Modern CMake Is focuses on a useful subset of CMake for a number of common tasks.  Using CMake to build something If a package cmake 3.15 or newer (most people), the following sequence will build and install a cmake project\ncmake -S ./path/to/sourcedir -B ./path/to/builddir cmake --build -j $(nproc) cmake --install Here ./path/to/sourcedir is the directory where you source files (specifically the “toplevel” CMakeLists.txt is stored). and ./path/to/builddir is a directory (which may not exist) where you want to store build artifacts prior to installation.\nYou can customize the build by passing flags to the first cmake command. I commonly use the following\ncmake -S ./path/to/sourcedir -B ./path/to/builddir \\  -G Ninja \\  -DCMAKE_INSTALL_PREFIX=$(pwd)/.local \\  -DBUILD_SHARED_LIBS=ON \\  -DBUILD_TESTING=ON \\  -DCMAKE_BUILD_TYPE=Debug \\  -DCMAKE_CXX_COMPILER_LAUNCHER=ccache \\  -DCMAKE_C_COMPILER_LAUNCHER=ccache \\  -DCMAKE_EXPORT_COMPILE_COMMANDS=ON cmake --build -j $(nproc) cmake --install To prefer the Ninja build generator, and ccache for faster development builds with shared libraries installed to my user’s prefix instaed of the the / or /usr prefix which may require admin privledges and to enable LLVM based tooliing (i.e. clangd for completions in my editor). These preferences are encoded into my m build tool.\nCMake also respects GNU style envionment variables (i.e. CXX, CC, CFLAGS, CXXFLAGS, and LDLIBS) to pick up common defaults.\nKey Commands Required boilerplate that must appear at the top of your top-level cmake\n cmake_minimum_required project  Basics\n add_library and add_executable create build objects target_link_libraries and PUBLIC vs PRIVATE to consume dependancies (including their header file flags) and link libraries target_include_directories to set include paths not provided by link libraries target_compile_features a portable way to set the C++ standard The most essential cmake variables $CMAKE_CURRENT_SOURCE_DIRECTORY and $CMAKE_CURRENT_BINARY_DIRECTORY Basic generator expressions such as $ vs $ for use with target_include_directories add_subdirectory for code organization  Adding 3rd party dependencies. Do yourself a favor and put all dependencies imports at the top level so the scope is right for the whole project.\n find_package to import dependancies built using CMake and certain system dependancies such as threads, MPI, Python, and OpenMP. find_package(PkgConfig) and pkg_search_modules to import dependencies described by pkg-config FetchContent download and provide dependencies as part of the build, but consider instead third party tools such as spack, connan, and vcpackage.  I’ve written a guide on CMake package dependencies here.\nHow do you currently handle dependencies and builds in your system? Is this portable to other machines where you would like to use this software? If not, what do you need to change and why?  Build Options\n option to add build options if for basic control flow configure_file to add a “configure file” which is typically header which has #defines for certain build system variables set with #cmakedefine or #cmakedefine01 target_add_sources to add additional source files to a library after the fact for example to compile in an optional plugin.  Installation\n include(GNUInstallDirs) and its associated variables like CMAKE_INSTALL_PREFIX, CMAKE_INSTALL_INCLUDEDIR , and CMAKE_INSTALL_LIBDIR install(TARGETS) to install your libraries and their export files install(DIRECTORY) to install your header files and data files include(CMakePackageConfigHelpers) and configure_package_config_file and write_basic_package_version_file to make your package importable by others  See this project for an example on how to properly expose a CMake dependency\nTesting\n include(CTest), BUILD_TESTING, and add_test include(GoogleTest) and gtest_discover_tests for high quality integration of googletest based tests  CMake Magic Variables to reconfigure builds\n CMAKE_BUILD_TYPE automatically configure optimizations like -O2 and -Og -g with settings like Release or Debug there are also other settings for RelWithDebInfo and MinSizeRel for small build artifacts BUILD_SHARED_LIBS to choose between shared and static linking INTERPROCEDURAL_OPTIMIZATION property enables IPO for faster optimizations  Enabling 3rd Party technologies CMake provides most of what you want on its own, but a few tools are worth knowing about:\n spack a dependencies manager for HPC software connan and vcpackage a dependency managers more common in enterprise ccache and sccache can be provided to CMAKE__COMPILER_LAUNCHER to dramatically speed up re-builds builds ninja is a much faster project builder than Make. You can enable it with -G Ninja passed to cmake ccmake a terminal user interface for setting cmake build options clang-tidy and include-what-you-use for extra static analysis can be used by setting the _CLANG_TIDY and _INCLUDE_WHAT_YOU_USE Doxygen for automatic documentation form the header-files of your project. Can be used automatically from CMake with find_package(Doxygen)  Important Concepts  PUBLIC, INTERFACE vs PRIVATE dependency and configurations SHARED, STATIC, INTERFACE vs IMPORTED libraries. The later you will use directly only seldom but is used for find_package internally. that target_* functions accumulate from everywhere they are used allowing code that adds specific features to be spread out Don’t use globbing to add files to a build. List them explicitly for best performance  Debugging CMake CMake can be obtuse at times. A few key commands can help:\n --trace puts cmake into trace mode to print all calls made in a CMake build system. CMAKE_FIND_DEBUG_MODE prints out extra information when finding a packages that can be used to track down how a variable was set. Newer versions have a flag --debug-find-pkg= which can enable this for specific packages. message(WARNING ...) print a warning message to the console with the specified message can be used for tracing and viewing values of a variable at a point in the code  Advanced Topics  for, function, and macro for advanced control flow execute_process for when you just need to run a script CUDA and other accelerator language support  Where to learn more  The Official CMake Documentation  Changelog  2023-02-09 linked to other cmake resources added section on debugging 2023-01-09 Added basic usage example 2022-11-15 Created  ","wordCount":"999","inLanguage":"en","datePublished":"2022-11-15T05:00:00-05:00","dateModified":"2022-11-15T05:00:00-05:00","author":{"@type":"Person","name":"Robert Underwood"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://robertu94.github.io/learning/cmake.html"},"publisher":{"@type":"Organization","name":"systems++","logo":{"@type":"ImageObject","url":"http://robertu94.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://robertu94.github.io/ accesskey=h title="systems++ (Alt + H)">systems++</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=http://robertu94.github.io/about.html title="About Me">
<span>About Me</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/guides.html title=Guides>
<span>Guides</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/learning.html title="Learning To Learn">
<span>Learning To Learn</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/presentations.html title=Presentations>
<span>Presentations</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=http://robertu94.github.io/>Home</a></div>
<h1 class=post-title>
Learning to Learn: CMake
</h1>
<div class=post-meta><span title="2022-11-15 05:00:00 -0500 -0500">November 15, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;999 words&nbsp;·&nbsp;Robert Underwood
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><nav id=TableOfContents>
<ul>
<li><a href=#how-to-get-started>How to get started</a></li>
<li><a href=#using-cmake-to-build-something>Using CMake to build something</a></li>
<li><a href=#key-commands>Key Commands</a></li>
<li><a href=#enabling-3rd-party-technologies>Enabling 3rd Party technologies</a></li>
<li><a href=#important-concepts>Important Concepts</a>
<ul>
<li><a href=#debugging-cmake>Debugging CMake</a></li>
</ul>
</li>
<li><a href=#advanced-topics>Advanced Topics</a></li>
<li><a href=#where-to-learn-more>Where to learn more</a></li>
<li><a href=#changelog>Changelog</a></li>
</ul>
</nav>
</div>
</details>
</div>
<div class=post-content><p>CMake is the de-facto C++ build system used by an overwhelming number of C++ projects.
Even if you personally favor more modern alternatives such as Meson, Bazel, or Pants, if you
ever pull in a 3rd party dependency, there is a good chance that it uses CMake so
knowing enough about CMake to understand it is worth knowing.</p>
<h1 id=how-to-get-started>How to get started<a hidden class=anchor aria-hidden=true href=#how-to-get-started>#</a></h1>
<p>I recommend new users to CMake start with the following resources:</p>
<ul>
<li><a href=https://cmake.org/cmake/help/book/mastering-cmake/>Mastering CMake</a> is a high level overview of how to use CMake developed and maintained by the CMake Developers.</li>
<li><a href=https://cliutils.gitlab.io/modern-cmake/>Modern CMake</a> Is focuses on a useful subset of CMake for a number of common tasks.</li>
</ul>
<h1 id=using-cmake-to-build-something>Using CMake to build something<a hidden class=anchor aria-hidden=true href=#using-cmake-to-build-something>#</a></h1>
<p>If a package cmake 3.15 or newer (most people), the following sequence will build and install a cmake project</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>cmake -S ./path/to/sourcedir -B ./path/to/builddir
cmake --build -j <span class=k>$(</span>nproc<span class=k>)</span>
cmake --install
</code></pre></div><p>Here <code>./path/to/sourcedir</code> is the directory where you source files (specifically the &ldquo;toplevel&rdquo; <code>CMakeLists.txt</code> is stored).
and <code>./path/to/builddir</code> is a directory (which may not exist) where you want to store build artifacts prior to installation.</p>
<p>You can customize the build by passing flags to the first cmake command. I commonly use the following</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>cmake -S ./path/to/sourcedir -B ./path/to/builddir <span class=se>\
</span><span class=se></span>        -G Ninja <span class=se>\
</span><span class=se></span>        -DCMAKE_INSTALL_PREFIX<span class=o>=</span><span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span>/.local <span class=se>\
</span><span class=se></span>        -DBUILD_SHARED_LIBS<span class=o>=</span>ON <span class=se>\
</span><span class=se></span>        -DBUILD_TESTING<span class=o>=</span>ON <span class=se>\
</span><span class=se></span>        -DCMAKE_BUILD_TYPE<span class=o>=</span>Debug <span class=se>\
</span><span class=se></span>        -DCMAKE_CXX_COMPILER_LAUNCHER<span class=o>=</span>ccache <span class=se>\
</span><span class=se></span>        -DCMAKE_C_COMPILER_LAUNCHER<span class=o>=</span>ccache <span class=se>\
</span><span class=se></span>        -DCMAKE_EXPORT_COMPILE_COMMANDS<span class=o>=</span>ON
cmake --build -j <span class=k>$(</span>nproc<span class=k>)</span>
cmake --install
</code></pre></div><p>To prefer the <code>Ninja</code> build generator, and <code>ccache</code> for faster development builds with shared libraries
installed to my user&rsquo;s prefix instaed of the the <code>/</code> or <code>/usr</code> prefix which may require admin privledges
and to enable LLVM based tooliing (i.e. <code>clangd</code> for completions in my editor). These preferences
are encoded into my <a href=https://github.com/robertu94/m><code>m</code> build tool</a>.</p>
<p>CMake also respects GNU style envionment variables (i.e. <code>CXX</code>, <code>CC</code>, <code>CFLAGS</code>,
<code>CXXFLAGS</code>, and <code>LDLIBS</code>) to pick up common defaults.</p>
<h1 id=key-commands>Key Commands<a hidden class=anchor aria-hidden=true href=#key-commands>#</a></h1>
<p>Required boilerplate that must appear at the top of your top-level cmake</p>
<ul>
<li><code>cmake_minimum_required</code></li>
<li><code>project</code></li>
</ul>
<p>Basics</p>
<ul>
<li><code>add_library</code> and <code>add_executable</code> create build objects</li>
<li><code>target_link_libraries</code> and <code>PUBLIC</code> vs <code>PRIVATE</code> to consume dependancies (including their header file flags) and link libraries</li>
<li><code>target_include_directories</code> to set include paths not provided by link libraries</li>
<li><code>target_compile_features</code> a portable way to set the C++ standard</li>
<li>The most essential cmake variables <code>$CMAKE_CURRENT_SOURCE_DIRECTORY</code> and <code>$CMAKE_CURRENT_BINARY_DIRECTORY</code></li>
<li>Basic generator expressions such as <code>$&lt;BUILD_INTERFACE:></code> vs <code>$&lt;INSTALL_INTERFACE:></code> for use with <code>target_include_directories</code></li>
<li><code>add_subdirectory</code> for code organization</li>
</ul>
<p>Adding 3rd party dependencies. Do yourself a favor and put all dependencies imports at the top level so the scope is right for the whole project.</p>
<ul>
<li><code>find_package</code> to import dependancies built using CMake and certain system dependancies such as threads, MPI, Python, and OpenMP.</li>
<li><code>find_package(PkgConfig)</code> and <code>pkg_search_modules</code> to import dependencies described by pkg-config</li>
<li><code>FetchContent</code> download and provide dependencies as part of the build, but consider instead third party tools such as <code>spack</code>, <code>connan</code>, and <code>vcpackage</code>.</li>
</ul>
<p>I&rsquo;ve written a guide on <a href=http://robertu94.github.io/guides/cmake_deps.html>CMake package dependencies here</a>.</p>
<ul class=activity>
<li>How do you currently handle dependencies and builds in your system? Is this portable to other machines where you would like to use this software? If not, what do you need to change and why?</li>
</ul>
<p>Build Options</p>
<ul>
<li><code>option</code> to add build options</li>
<li><code>if</code> for basic control flow</li>
<li><code>configure_file</code> to add a &ldquo;configure file&rdquo; which is typically header which has <code>#defines</code> for certain build system variables set with <code>#cmakedefine</code> or <code>#cmakedefine01</code></li>
<li><code>target_add_sources</code> to add additional source files to a library after the fact for example to compile in an optional plugin.</li>
</ul>
<p>Installation</p>
<ul>
<li><code>include(GNUInstallDirs)</code> and its associated variables like <code>CMAKE_INSTALL_PREFIX</code>, <code>CMAKE_INSTALL_INCLUDEDIR</code> , and <code>CMAKE_INSTALL_LIBDIR</code></li>
<li><code>install(TARGETS)</code> to install your libraries and their export files</li>
<li><code>install(DIRECTORY)</code> to install your header files and data files</li>
<li><code>include(CMakePackageConfigHelpers)</code> and <code>configure_package_config_file</code> and <code>write_basic_package_version_file</code> to make your package importable by others</li>
</ul>
<p>See this project for an example on <a href=https://github.com/robertu94/libpressio-nvcomp/blob/4a599ab3136b1f8faeb0ad9cf5c8af719f739837/CMakeLists.txt#L62-L88>how to properly expose a CMake dependency</a></p>
<p>Testing</p>
<ul>
<li><code>include(CTest)</code>, <code>BUILD_TESTING</code>, and <code>add_test</code></li>
<li><code>include(GoogleTest)</code> and <code>gtest_discover_tests</code> for high quality integration of googletest based tests</li>
</ul>
<p>CMake Magic Variables to reconfigure builds</p>
<ul>
<li><code>CMAKE_BUILD_TYPE</code> automatically configure optimizations like <code>-O2</code> and <code>-Og -g</code> with settings like <code>Release</code> or <code>Debug</code> there are also other settings for <code>RelWithDebInfo</code> and <code>MinSizeRel</code> for small build artifacts</li>
<li><code>BUILD_SHARED_LIBS</code> to choose between shared and static linking</li>
<li><code>INTERPROCEDURAL_OPTIMIZATION</code> property enables IPO for faster optimizations</li>
</ul>
<h1 id=enabling-3rd-party-technologies>Enabling 3rd Party technologies<a hidden class=anchor aria-hidden=true href=#enabling-3rd-party-technologies>#</a></h1>
<p>CMake provides most of what you want on its own, but a few tools are worth knowing about:</p>
<ul>
<li><code>spack</code> a dependencies manager for HPC software</li>
<li><code>connan</code> and <code>vcpackage</code> a dependency managers more common in enterprise</li>
<li><code>ccache</code> and <code>sccache</code> can be provided to <code>CMAKE_&lt;Lang>_COMPILER_LAUNCHER</code> to dramatically speed up re-builds builds</li>
<li><code>ninja</code> is a much faster project builder than <code>Make</code>. You can enable it with <code>-G Ninja</code> passed to cmake</li>
<li><code>ccmake</code> a terminal user interface for setting cmake build options</li>
<li><code>clang-tidy</code> and <code>include-what-you-use</code> for extra static analysis can be used by setting the <code>&lt;LANG>_CLANG_TIDY</code> and <code>&lt;LANG>_INCLUDE_WHAT_YOU_USE</code></li>
<li><code>Doxygen</code> for automatic documentation form the header-files of your project. Can be used automatically from CMake with <code>find_package(Doxygen)</code></li>
</ul>
<h1 id=important-concepts>Important Concepts<a hidden class=anchor aria-hidden=true href=#important-concepts>#</a></h1>
<ul>
<li><code>PUBLIC</code>, <code>INTERFACE</code> vs <code>PRIVATE</code> dependency and configurations</li>
<li><code>SHARED</code>, <code>STATIC</code>, <code>INTERFACE</code> vs <code>IMPORTED</code> libraries. The later you will use directly only seldom but is used for <code>find_package</code> internally.</li>
<li>that <code>target_*</code> functions accumulate from everywhere they are used allowing code that adds specific features to be spread out</li>
<li>Don&rsquo;t use globbing to add files to a build. List them explicitly for best performance</li>
</ul>
<h2 id=debugging-cmake>Debugging CMake<a hidden class=anchor aria-hidden=true href=#debugging-cmake>#</a></h2>
<p>CMake can be obtuse at times. A few key commands can help:</p>
<ul>
<li><code>--trace</code> puts cmake into trace mode to print all calls made in a CMake build system.</li>
<li><code>CMAKE_FIND_DEBUG_MODE</code> prints out extra information when finding a packages that can be used to track down how a variable was set. Newer versions have a flag <code>--debug-find-pkg=</code> which can enable this for specific packages.</li>
<li><code>message(WARNING ...)</code> print a warning message to the console with the specified message can be used for tracing and viewing values of a variable at a point in the code</li>
</ul>
<h1 id=advanced-topics>Advanced Topics<a hidden class=anchor aria-hidden=true href=#advanced-topics>#</a></h1>
<ul>
<li><code>for</code>, <code>function</code>, and <code>macro</code> for advanced control flow</li>
<li><code>execute_process</code> for when you just need to run a script</li>
<li>CUDA and other accelerator language support</li>
</ul>
<h1 id=where-to-learn-more>Where to learn more<a hidden class=anchor aria-hidden=true href=#where-to-learn-more>#</a></h1>
<ul>
<li><a href=https://cmake.org/cmake/help/latest/index.html>The Official CMake Documentation</a></li>
</ul>
<h1 id=changelog>Changelog<a hidden class=anchor aria-hidden=true href=#changelog>#</a></h1>
<ul>
<li>2023-02-09 linked to other cmake resources added section on debugging</li>
<li>2023-01-09 Added basic usage example</li>
<li>2022-11-15 Created</li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=http://robertu94.github.io/tags/learning-to-learn.html>Learning to Learn</a></li>
<li><a href=http://robertu94.github.io/tags/programming.html>Programming</a></li>
<li><a href=http://robertu94.github.io/tags/c++.html>C++</a></li>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2024 <a href=http://robertu94.github.io/>systems++</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>