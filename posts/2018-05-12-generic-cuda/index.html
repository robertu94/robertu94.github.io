<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>Generic Cuda &#183; Systems++</title>
<meta name=title content="Generic Cuda &#183; Systems++"><script type=text/javascript src=/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.f5d02fd21ba62de62cf162b932a2a9bf2ea60bb62b0c8226cfa8734afb546691.css integrity="sha256-9dAv0humLeYs8WK5MqKpvy6mC7YrDIImz6hzSvtUZpE="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.d85fab7ccfc2112e9c50ae4adc7fa76fa179c95f40e02a11e18eb397acb6139e.js integrity="sha256-2F+rfM/CES6cUK5K3H+nb6F5yV9A4CoR4Y6zl6y2E54=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      
        GPU programming has the potential to make embarrassingly parallel tasks very quick.
But what if you want to perform the same task on a variety of different types?
In this post, I walk through a generic testing code that preforms a vector add on GPU and CPU to verify the correctness.
      
    "><link rel=canonical href=https://robertu94.github.io/posts/2018-05-12-generic-cuda/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://robertu94.github.io/posts/2018-05-12-generic-cuda/"><meta property="og:site_name" content="Systems++"><meta property="og:title" content="Generic Cuda"><meta property="og:description" content="GPU programming has the potential to make embarrassingly parallel tasks very quick. But what if you want to perform the same task on a variety of different types? In this post, I walk through a generic testing code that preforms a vector add on GPU and CPU to verify the correctness."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-05-12T08:00:14-05:00"><meta property="article:modified_time" content="2018-05-12T08:00:14-05:00"><meta property="article:tag" content="C++"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Cuda"><meta name=twitter:card content="summary"><meta name=twitter:title content="Generic Cuda"><meta name=twitter:description content="GPU programming has the potential to make embarrassingly parallel tasks very quick. But what if you want to perform the same task on a variety of different types? In this post, I walk through a generic testing code that preforms a vector add on GPU and CPU to verify the correctness."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Generic Cuda","headline":"Generic Cuda","abstract":"\u003cp\u003eGPU programming has the potential to make embarrassingly parallel tasks very quick.\nBut what if you want to perform the same task on a variety of different types?\nIn this post, I walk through a generic testing code that preforms a vector add on GPU and CPU to verify the correctness.\u003c\/p\u003e","inLanguage":"en","url":"https:\/\/robertu94.github.io\/posts\/2018-05-12-generic-cuda\/","author":{"@type":"Person","name":"Robert Underwood"},"copyrightYear":"2018","dateCreated":"2018-05-12T08:00:14-05:00","datePublished":"2018-05-12T08:00:14-05:00","dateModified":"2018-05-12T08:00:14-05:00","keywords":["C++","programming","Cuda"],"mainEntityOfPage":"true","wordCount":"1379"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://robertu94.github.io/","name":"Systems","position":1},{"@type":"ListItem","item":"https://robertu94.github.io/posts/","name":"Posts","position":2},{"@type":"ListItem","name":"Generic Cuda","position":3}]}</script><meta name=author content="Robert Underwood"><link href=https://github.com/robertu94 rel=me><link href=mailto:rr.underwood94@gmail.com rel=me><link href=/about rel=me><link href="https://scholar.google.com/citations?user=GbhfWUIAAAAJ&amp;hl=en" rel=me><link href=https://orcid.org/0000-0002-1464-729X rel=me><link href=https://www.youtube.com/@robertunderwood97 rel=me><link href=https://keybase.io/robertu94 rel=me></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Systems++</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="invisible fixed inset-0 z-30 m-auto h-full w-full cursor-default overflow-auto bg-neutral-100/50 opacity-0 backdrop-blur-sm transition-opacity dark:bg-neutral-900/50"><ul class="mx-auto flex w-full max-w-7xl list-none flex-col overflow-visible px-6 py-6 text-end sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="group mb-1"><a href=/about/ title="About Me" onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1"><a href=/posts/ title=Posts onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1"><a href=/guides/ title onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Guides</span></a></li><li class="group mb-1"><a href=/learning/ title onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Learning To Learn</span></a></li><li class="group mb-1"><button id=search-button-m0 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></div></label><ul class="hidden list-none flex-row text-end sm:flex"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/about/ title="About Me"><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/guides/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Guides</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/learning/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Learning To Learn</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-m1 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Generic Cuda</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2018-05-12 08:00:14 -0500 -0500">12 May 2018</time><span class="px-2 text-primary-500">&#183;</span><span>1379 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 lg:sticky lg:top-10 print:hidden"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#the-test-harness>The Test Harness</a></li><li><a href=#generating-random-data>Generating random data</a></li><li><a href=#computed-expected-on-the-cpu>Computed expected on the CPU</a></li><li><a href=#moving-data-to-the-device>Moving data to the device</a></li><li><a href=#creating-and-launching-the-kernel>Creating and Launching the Kernel</a></li><li><a href=#printing-results>Printing results</a></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><p>GPU programming has the potential to make embarrassingly parallel tasks very quick.
But what if you want to perform the same task on a variety of different types?
In this post, I walk through a generic testing code that preforms a vector add on GPU and CPU to verify the correctness.</p><h1 id=the-test-harness class="relative group">The Test Harness <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-test-harness aria-label=Anchor>#</a></span></h1><p>Our main function is pretty simple:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>main</span>(<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> argv[])
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  check_type<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span>  check_type<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>long</span><span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span>  check_type<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span><span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span>  check_type<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>float</span><span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>So how do we write <code>check_type</code>?
Since it does most of our work, let&rsquo;s break it down step by step.
First we create a function that will perform our check and allcoate some data pointers we will use later.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span>
</span></span><span style=display:flex><span>check_type()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#75715e>//create an array for 1024 items of type T
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> elms <span style=color:#f92672>=</span> <span style=color:#ae81ff>1024</span>;
</span></span><span style=display:flex><span>  std<span style=color:#f92672>::</span>array<span style=color:#f92672>&lt;</span>T, elms<span style=color:#f92672>&gt;</span> a, b, c, d;
</span></span><span style=display:flex><span>  T <span style=color:#f92672>*</span>d_a <span style=color:#f92672>=</span> <span style=color:#66d9ef>nullptr</span>, <span style=color:#f92672>*</span>d_b <span style=color:#f92672>=</span> <span style=color:#66d9ef>nullptr</span>, <span style=color:#f92672>*</span>d_c <span style=color:#f92672>=</span> <span style=color:#66d9ef>nullptr</span>; <span style=color:#75715e>// device vectors
</span></span></span></code></pre></div><h1 id=generating-random-data class="relative group">Generating random data <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#generating-random-data aria-label=Anchor>#</a></span></h1><p>To have the best guarentee that the code is working, it is best to test with random data.
To do that we need to generate random data according to a distribution.
In C++11, you do this by creating a random number distribution and seeding it with a random number engine.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>  <span style=color:#75715e>//create a random number generator
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  std<span style=color:#f92672>::</span>random_device rd;
</span></span><span style=display:flex><span>  std<span style=color:#f92672>::</span>mt19937 eng(rd());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>typename</span> std<span style=color:#f92672>::</span>conditional<span style=color:#f92672>&lt;</span>
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>is_integral<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;::</span>value, std<span style=color:#f92672>::</span>uniform_int_distribution<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>uniform_real_distribution<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;&gt;::</span>type generator;
</span></span><span style=display:flex><span>  generator <span style=color:#a6e22e>dist</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>auto</span> trand <span style=color:#f92672>=</span> [<span style=color:#f92672>&amp;</span>dist, <span style=color:#f92672>&amp;</span>eng]() { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>dist</span>(eng); };
</span></span></code></pre></div><p>In the code above we first create a <code>std::random_device</code> which is responsible to seed our random number generator.
However, since this uses hardware randomness (if available), it can be slow.
So it is not uncommon to switch to a pseduo-random number generator which we do with the marsenne twister generator <code>mt19937</code> on the next line.
For the generator, we need to decide if we need integral data (i.e. integers) or floating point data.
We accomplish this using <code>std::conditional</code> and <code>std::is_integral</code> to select at template instantiation time between a <code>std::uniform_int_distribution</code> and a <code>std::uniform_real_distribution</code>.
Finally we create a lambda expression to create a version that behaves like classic C style <code>rand</code>.</p><h1 id=computed-expected-on-the-cpu class="relative group">Computed expected on the CPU <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#computed-expected-on-the-cpu aria-label=Anchor>#</a></span></h1><p>If you&rsquo;ve never worked with C++&rsquo;s <code>&lt;algorithm></code> header it makes boiler plate code like this a dream.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>  <span style=color:#75715e>//check_type cont...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//generate random inputs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  std<span style=color:#f92672>::</span>generate(std<span style=color:#f92672>::</span>begin(a), std<span style=color:#f92672>::</span>end(a), trand);
</span></span><span style=display:flex><span>  std<span style=color:#f92672>::</span>generate(std<span style=color:#f92672>::</span>begin(b), std<span style=color:#f92672>::</span>end(b), trand);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//compute the expected output on the CPU
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  std<span style=color:#f92672>::</span>plus<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> pl;
</span></span><span style=display:flex><span>  std<span style=color:#f92672>::</span>transform(std<span style=color:#f92672>::</span>begin(a), std<span style=color:#f92672>::</span>end(a), std<span style=color:#f92672>::</span>begin(b), std<span style=color:#f92672>::</span>begin(d), pl);
</span></span><span style=display:flex><span>  std<span style=color:#f92672>::</span>fill(std<span style=color:#f92672>::</span>begin(c), std<span style=color:#f92672>::</span>end(c), <span style=color:#ae81ff>0</span>);
</span></span></code></pre></div><p>First we generate two arrays with random numbers.
After that we compute the results by transforming the two arrays we generated into the result array by adding them.
Finally we fill the result array with zeros to ensure the comparison fails latter if some thing goes poorly.</p><h1 id=moving-data-to-the-device class="relative group">Moving data to the device <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#moving-data-to-the-device aria-label=Anchor>#</a></span></h1><p>Unlike CPU programming, GPU programming requires explicit data movement to be efficient.
Before we run the kernel, we need to explicitly request space on the GPU and move the data to it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//check_type cont...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//allocate the device buffers for inputs and outputs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  size_t size <span style=color:#f92672>=</span> (<span style=color:#66d9ef>sizeof</span>(T) <span style=color:#f92672>*</span> elms);
</span></span><span style=display:flex><span>  check_error(cudaMalloc((<span style=color:#66d9ef>void</span><span style=color:#f92672>**</span>)<span style=color:#f92672>&amp;</span>d_a, size));
</span></span><span style=display:flex><span>  check_error(cudaMalloc((<span style=color:#66d9ef>void</span><span style=color:#f92672>**</span>)<span style=color:#f92672>&amp;</span>d_b, size));
</span></span><span style=display:flex><span>  check_error(cudaMalloc((<span style=color:#66d9ef>void</span><span style=color:#f92672>**</span>)<span style=color:#f92672>&amp;</span>d_c, size));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//load the inputs onto the device
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  check_error(cudaMemcpy(d_a, a.data(), size, cudaMemcpyHostToDevice));
</span></span><span style=display:flex><span>  check_error(cudaMemcpy(d_b, b.data(), size, cudaMemcpyHostToDevice));
</span></span></code></pre></div><p>Notice we compute the size based off the number of elements and the size of the type, but for C programmers who use malloc this isn&rsquo;t a huge surprise.
We take advantage of the <code>.data()</code> routine to work with <code>std::array</code> instead of raw data pointers.</p><p>You&rsquo;ll notice calls to a method called <code>check_error</code>, for now just remember that it performs error handling.
We&rsquo;ll talk more about it in a later section.</p><h1 id=creating-and-launching-the-kernel class="relative group">Creating and Launching the Kernel <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#creating-and-launching-the-kernel aria-label=Anchor>#</a></span></h1><p>Not much changes in launching the kernel and retrieving the results.
All we have to do is add <code>&lt;T></code> to dispatch to the correct typed version of <code>vadd</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>  <span style=color:#75715e>//check_type cont...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//launch the kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>int</span> threadsPerBlock <span style=color:#f92672>=</span> <span style=color:#ae81ff>256</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> blocksPerGrid <span style=color:#f92672>=</span> (elms <span style=color:#f92672>+</span> threadsPerBlock <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>/</span> threadsPerBlock;
</span></span><span style=display:flex><span>  vadd<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;&lt;&lt;&lt;</span>threadsPerBlock, blocksPerGrid<span style=color:#f92672>&gt;&gt;&gt;</span>(d_a, d_b, d_c, elms);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//copy the results back to the host
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  check_error(cudaMemcpy(c.data(), d_c, size, cudaMemcpyDeviceToHost));
</span></span></code></pre></div><p>So, how is <code>vadd</code> defined?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>__global__ <span style=color:#66d9ef>void</span>
</span></span><span style=display:flex><span>vadd(<span style=color:#66d9ef>const</span> T<span style=color:#f92672>*</span> a, <span style=color:#66d9ef>const</span> T<span style=color:#f92672>*</span> b, T<span style=color:#f92672>*</span> c, <span style=color:#66d9ef>int</span> elms)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> idx <span style=color:#f92672>=</span> blockIdx.x <span style=color:#f92672>*</span> blockDim.x <span style=color:#f92672>+</span> threadIdx.x;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (idx <span style=color:#f92672>&lt;</span> elms) {
</span></span><span style=display:flex><span>    c[idx] <span style=color:#f92672>=</span> a[idx] <span style=color:#f92672>+</span> b[idx];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If you&rsquo;ve ever used cuda, this code isn&rsquo;t that surprising.
They only key difference is the introduction of the <code>template &lt;class T></code> bit to make the code generic.</p><p>We could have accomplished the same impact with some code like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>#define vadd_impl(T)                                  \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  __global__ void                                     \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  vadd_##T(const T * a, const T * b, T * c, int elms) \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  {                                                   \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    int idx = blockIdx.x * blockDim.x + threadIdx.x;  \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    if (idx &lt; elms) {                                 \
</span></span></span><span style=display:flex><span><span style=color:#75715e>      c[idx] = a[idx] + b[idx];                       \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    }                                                 \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>vadd_impl(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>vadd_impl(<span style=color:#66d9ef>long</span>)
</span></span><span style=display:flex><span>vadd_impl(<span style=color:#66d9ef>float</span>)
</span></span><span style=display:flex><span>vadd_impl(<span style=color:#66d9ef>double</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># define vadd(T) vadd_##T
</span></span></span></code></pre></div><p>which would then be called in the driver like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>vadd(T)<span style=color:#f92672>&lt;&lt;&lt;</span>threadsPerBlock,blocksPerGrid<span style=color:#f92672>&gt;&gt;&gt;</span>(d_a, d_b, d_c, elems)
</span></span></code></pre></div><p>But what do we lose by doing this?
We loose some readability and compiler support.
Notice the <code>vadd_impl(int)</code>, <code>vadd_impl(long)</code>, and so on.
This has to be explicitly defined for each type.
Not only is this tedious, if cuda decided to add a new type, we have to update our library to support it.
We also generate the code for each method whether or not we use it.
But what do we gain by doing it this way?
As much as I hate to say it, opencl support for most hardware available right now.
Opencl 2.2 introduced the c++ kernel language which includes template support, but very few vendors support this syntax.
Without it, you are left to use macros to get the same generic code.</p><h1 id=printing-results class="relative group">Printing results <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#printing-results aria-label=Anchor>#</a></span></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>  <span style=color:#75715e>//check_type cont...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//check if the results are the same and report to the user
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> name<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;::</span>n <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; &#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;&lt;</span> (std<span style=color:#f92672>::</span>equal(std<span style=color:#f92672>::</span>begin(c), std<span style=color:#f92672>::</span>end(c), std<span style=color:#f92672>::</span>begin(d))
</span></span><span style=display:flex><span>                  <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;success&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;failed&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cleanup:
</span></span><span style=display:flex><span>  cudaFree(d_a);
</span></span><span style=display:flex><span>  cudaFree(d_b);
</span></span><span style=display:flex><span>  cudaFree(d_c);
</span></span></code></pre></div><p>What is <code>name&lt;T>::n</code>?
You may recall that C++ currently doesn&rsquo;t really have fully featured reflection (that may change if Herb Sutter gets his way&mldr;).
So if you want the name of a class, you have two choices, <code>typeid</code> or some clever template programming.
The problem with <code>typeid.name()</code> is that it returns an implementation defined name.
For clang and gcc, this is the mangled name that is generated by the compiler for purposes getting unique names for linking.
This can be cleaned up into a human readable name using an implementation specific demangle function.
However, this is far from a perfect procedure, so I opted for some clever template programming.
<code>name</code> is a struct that defines the name of the type is passed in as its template parameter.
It is defined like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>name</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> n;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define decl_name(T)                                                           \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  template &lt;&gt;                                                                  \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  struct name&lt;T&gt;                                                               \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  {                                                                            \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    static const char* const n;                                                \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  };                                                                           \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  const char* const name&lt;T&gt;::n = #T;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>decl_name(<span style=color:#66d9ef>int</span>);
</span></span><span style=display:flex><span>decl_name(<span style=color:#66d9ef>double</span>);
</span></span><span style=display:flex><span>decl_name(<span style=color:#66d9ef>float</span>);
</span></span><span style=display:flex><span>decl_name(<span style=color:#66d9ef>long</span>);
</span></span></code></pre></div><p>It defines a macro and uses the <code>#</code> operator to convert the template type parameter to a string.
The macro creates a template specialization of the <code>name</code> base template provided above.
This provides a compile-time way to get the appropriate type name with requiring demangling.
There is a weakness to this method.
It can&rsquo;t have separate entries for type aliases (i.e. <code>size_t</code>).
But since I didn&rsquo;t need that flexibility for my code, it was fine.</p><p>So what is with the label <code>cleanup</code>?
Remember the method called <code>check_error</code>?
It prints a failure message and cleans up memory if a cuda function fails.
It is defined like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define check_error(x)                                                         \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  do {                                                                         \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    cudaError_t err = (x);                                                     \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    if (err != cudaSuccess) {                                                  \
</span></span></span><span style=display:flex><span><span style=color:#75715e>      std::cerr &lt;&lt; &#34;Failed: &#34; &lt;&lt; __LINE__ &lt;&lt; &#34; &#34; &lt;&lt; cudaGetErrorString(err)    \
</span></span></span><span style=display:flex><span><span style=color:#75715e>                &lt;&lt; std::endl;                                                  \
</span></span></span><span style=display:flex><span><span style=color:#75715e>      goto cleanup;                                                            \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    }                                                                          \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  } while (0)
</span></span></span></code></pre></div><p>Macros that are intended to act like functions can have bizarre interactions if used in non-standard places.
Wrapping a macro in a <code>do { } while(0)}</code> allows the macro to be used almost everywhere a function call can.
It also has the effect of creating a scope that can prevent naming conflicts.
The parens about <code>(x)</code> are also to prevent weird order of operations bugs that can results from macros.
Finally we <code>goto cleanup</code> if the error happens which simplifies the control flow from being a huge <code>if</code> pyramid.</p><p>I hope you find this helpful. Until next time, happy programming!</p></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Robert Underwood</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Robert is an Assistant Computer Scientist in the Mathematics and Computer Science Division at Argonne National Laboratory focusing on data and I/O for large-scale scientific applications including AI for Science using techniques of lossy compression, and data management. He currently co-leads the AuroraGPT Data Team with Ian Foster. In addition to AI, Robert’s library LibPressio, allows users to experiment and adopt advanced compressors quickly, has over 200 average unique monthly downloads, is used in over 17 institutions worldwide, and he is also a contributor to the R&amp;D100 winning SZ family of compressors and other compression libraries. He regularly mentors students and is the early career ambassador for Argonne to the Joint Laboratory for Extreme Scale Computing.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/robertu94 target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=mailto:rr.underwood94@gmail.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=/about target=_blank aria-label=Link rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 640 512"><path fill="currentcolor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href="https://scholar.google.com/citations?user=GbhfWUIAAAAJ&amp;hl=en" target=_blank aria-label=Google-Scholar rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg height="16" width="16" viewBox="0 0 512 512"><path fill="currentcolor" d="M390.9 298.5s0 .1.1.1c9.2 19.4 14.4 41.1 14.4 64C405.3 445.1 338.5 512 256 512s-149.3-66.9-149.3-149.3c0-22.9 5.2-44.6 14.4-64h0c1.7-3.6 3.6-7.2 5.6-10.7 4.4-7.6 9.4-14.7 15-21.3 27.4-32.6 68.5-53.3 114.4-53.3 33.6.0 64.6 11.1 89.6 29.9 9.1 6.9 17.4 14.7 24.8 23.5 5.6 6.6 10.6 13.8 15 21.3 2 3.4 3.8 7 5.5 10.5zm26.4-18.8c-30.1-58.4-91-98.4-161.3-98.4s-131.2 40-161.3 98.4L0 202.7 256 0 512 202.7l-94.7 77.1z"/></svg></span></a>
<a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://orcid.org/0000-0002-1464-729X target=_blank aria-label=Orcid rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M294.75 188.19h-45.92V342h47.47c67.62.0 83.12-51.34 83.12-76.91.0-41.64-26.54-76.9-84.67-76.9zM256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm-80.79 360.76h-29.84v-207.5h29.84zm-14.92-231.14a19.57 19.57.0 1119.57-19.57 19.64 19.64.0 01-19.57 19.57zM3e2 369h-81V161.26h80.6c76.73.0 110.44 54.83 110.44 103.85C410 318.39 368.38 369 3e2 369z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.youtube.com/@robertunderwood97 target=_blank aria-label=Youtube rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://keybase.io/robertu94 target=_blank aria-label=Keybase rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M286.17 419a18 18 0 1018 18 18 18 0 00-18-18zm111.92-147.6c-9.5-14.62-39.37-52.45-87.26-73.71q-9.1-4.06-18.38-7.27A78.43 78.43.0 00244.57 86.29c-12.41-4.1-23.33-6-32.41-5.77-.6-2-1.89-11 9.4-35L198.66 32l-5.48 7.56c-8.69 12.06-16.92 23.55-24.34 34.89a51 51 0 00-8.29-1.25c-41.53-2.45-39-2.33-41.06-2.33-50.61.0-50.75 52.12-50.75 45.88l-2.36 36.68c-1.61 27 19.75 50.21 47.63 51.85l8.93.54a214 214 0 00-46.29 35.54C14 304.66 14 374 14 429.77v33.64l23.32-29.8a148.6 148.6.0 0014.56 37.56c5.78 10.13 14.87 9.45 19.64 7.33 4.21-1.87 10-6.92 3.75-20.11a178.29 178.29.0 01-15.76-53.13l46.82-59.83-24.66 74.11c58.23-42.4 157.38-61.76 236.25-38.59 34.2 10.05 67.45.69 84.74-23.84.72-1 1.2-2.16 1.85-3.22a156.09 156.09.0 012.8 28.43c0 23.3-3.69 52.93-14.88 81.64-2.52 6.46 1.76 14.5 8.6 15.74 7.42 1.57 15.33-3.1 18.37-11.15C429 443 434 414 434 382.32c0-38.58-13-77.46-35.91-110.92zM142.37 128.58l-15.7-.93-1.39 21.79 13.13.78a93 93 0 00.32 19.57l-22.38-1.34a12.28 12.28.0 01-11.76-12.79L107 119c1-12.17 13.87-11.27 13.26-11.32l29.11 1.73a144.35 144.35.0 00-7 19.17zm148.42 172.18a10.51 10.51.0 01-14.35-1.39l-9.68-11.49-34.42 27a8.09 8.09.0 01-11.13-1.08l-15.78-18.64a7.38 7.38.0 011.34-10.34l34.57-27.18-14.14-16.74-17.09 13.45a7.75 7.75.0 01-10.59-1s-3.72-4.42-3.8-4.53a7.38 7.38.0 011.37-10.34L214 225.19s-18.51-22-18.6-22.14a9.56 9.56.0 011.74-13.42 10.38 10.38.0 0114.3 1.37l81.09 96.32a9.58 9.58.0 01-1.74 13.44zM187.44 419a18 18 0 1018 18 18 18 0 00-18-18z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/posts/2017-12-10-life-with-libtooling/><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Life with Libtooling</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2017-12-10 11:21:00 -0500 -0500">10 December 2017</time>
</span></span></a></span><span><a class="group flex text-right" href=/posts/2018-07-31-configuration-management-related-systems/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Configuration Management: the Related Systems</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2018-07-31 08:00:00 -0500 -0500">31 July 2018</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Robert Underwood</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://robertu94.github.io/><div id=search-modal class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex flex-none items-center justify-between px-2"><form class="flex min-w-0 flex-auto items-center"><div class="flex h-8 w-8 items-center justify-center text-neutral-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto overflow-auto px-2"><ul id=search-results></ul></section></div></div></div></body></html>