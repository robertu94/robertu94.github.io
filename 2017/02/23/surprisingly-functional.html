<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Surprisingly Functional | systems++</title>
<meta name=keywords content="shell,C++11,functional programming">
<meta name=description content="Functional programming is a surprisingly useful programming paradigm. The best aspects of functional programming have this odd habit of showing in places you would never expect.
The Shell and Endomorphisms Arguably one of the most powerful features of the Unix shell is the pipe. It is one of the core building blocks of the Unix philosophy of many small tools working together each doing one thing well. However, long before Unix, the idea of the endomorphisms was developed.">
<meta name=author content="Robert Underwood">
<link rel=canonical href=http://robertu94.github.io/2017/02/23/surprisingly-functional.html>
<meta name=google-site-verification content="G-9KQE44SX6K">
<link crossorigin=anonymous href=/assets/css/stylesheet.57f29198e62b3a8f07d37acaca0427bafb684416046b823f5a616bd858bb4af1.css integrity="sha256-V/KRmOYrOo8H03rKygQnuvtoRBYEa4I/WmFr2Fi7SvE=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.baa4f2053c75d0009e9309aae8f8a8959f5e0372e88f80cdf2951a9533d71ce2.js integrity="sha256-uqTyBTx10ACekwmq6PiolZ9eA3Loj4DN8pUalTPXHOI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://robertu94.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=http://robertu94.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=http://robertu94.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=http://robertu94.github.io/apple-touch-icon.png>
<link rel=mask-icon href=http://robertu94.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9KQE44SX6K"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-9KQE44SX6K',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Surprisingly Functional">
<meta property="og:description" content="Functional programming is a surprisingly useful programming paradigm. The best aspects of functional programming have this odd habit of showing in places you would never expect.
The Shell and Endomorphisms Arguably one of the most powerful features of the Unix shell is the pipe. It is one of the core building blocks of the Unix philosophy of many small tools working together each doing one thing well. However, long before Unix, the idea of the endomorphisms was developed.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://robertu94.github.io/2017/02/23/surprisingly-functional.html"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-02-23T08:38:14-05:00">
<meta property="article:modified_time" content="2017-02-23T08:38:14-05:00"><meta property="og:site_name" content="Systems++">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Surprisingly Functional">
<meta name=twitter:description content="Functional programming is a surprisingly useful programming paradigm. The best aspects of functional programming have this odd habit of showing in places you would never expect.
The Shell and Endomorphisms Arguably one of the most powerful features of the Unix shell is the pipe. It is one of the core building blocks of the Unix philosophy of many small tools working together each doing one thing well. However, long before Unix, the idea of the endomorphisms was developed.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Surprisingly Functional","item":"http://robertu94.github.io/2017/02/23/surprisingly-functional.html"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Surprisingly Functional","name":"Surprisingly Functional","description":"Functional programming is a surprisingly useful programming paradigm. The best aspects of functional programming have this odd habit of showing in places you would never expect.\nThe Shell and Endomorphisms Arguably one of the most powerful features of the Unix shell is the pipe. It is one of the core building blocks of the Unix philosophy of many small tools working together each doing one thing well. However, long before Unix, the idea of the endomorphisms was developed.","keywords":["shell","C++11","functional programming"],"articleBody":"Functional programming is a surprisingly useful programming paradigm. The best aspects of functional programming have this odd habit of showing in places you would never expect.\nThe Shell and Endomorphisms Arguably one of the most powerful features of the Unix shell is the pipe. It is one of the core building blocks of the Unix philosophy of many small tools working together each doing one thing well. However, long before Unix, the idea of the endomorphisms was developed. The endomorphisms are a cornerstone of functional programming and I would argue why the pipe is so powerful.\nA few rough definitions:\n A morphism is “A structure preserving map from one type to another” For example, functions are morphism. A endomorphism is a morphism for which the co-domain (or range) is the domain of the morphism.  In functional programming, endomorphisms are useful because they are can be composed in arbitrary order. That is not to say that they are associative, only that the output of the function is well formed regardless of how they are composed.\nNow consider what a standard Unix process uses as input and output: They accept text as input. They and emit text as output. In other words, they are endomorphisms.\nWhich brings us to the pipe operator. Pipes take take the standard output of one processes and use it as the standard input to another process. So in essence, pipe is the composition operator of shell programming. With compositions and endomorphisms you will go far.\nof Optional types and Pointers Pointers are the source of many a computer science student’s frustration. However, used wisely, they can be used to implement an moadic Optional type.\nTo be a monad, a type must:\n be parameterized by a specific type have a unit function that converts an instance of the type to an instance of the monad have a bind operation that takes a instance of monad type and return another monad type  A couple observations from the bowels of standards for C and C++:\n free(nullptr); and delete nullptr; both perform no operation. NULL and its C++11 cousin nullptr evaluates to false, all other pointers evaluate to true.  With these two facts we can write a type generic Optional monad (see this repository) for a full implementation).\n//in Optional.h class OptionalBase { // for type safety public: OptionalBase() = default; virtual ~OptionalBase() = default; }; template class T class Optional: public OptionalBase { public: OptionalT() : OptionalBase(), managed(nullptr) {} OptionalT(T v) : OptionalBase(), managed(new T(v)) {} OptionalT(T* v) : OptionalBase(), managed((v)? new T(*v) : nullptr) {} OptionalT(const OptionalT \u0026v) : OptionalBase(), managed((v.managed) ? new T(*v.managed) : nullptr) {} ~Optional() {delete managed;} Optional\u0026 operator= (const Optional\u0026 rhs) { if(\u0026rhs == this) return *this; delete managed; managed = ((rhs.managed) ? (new T(rhs.managed)): (nullptr)); return *this; } bool operator==(const OptionalT \u0026rhs) { if (managed == nullptr \u0026\u0026 rhs.managed == nullptr) return true; // empty == empty \telse if (managed == nullptr || rhs.managed == nullptr) return false; // empty != full \telse return *managed == *rhs.managed; } template class Ret, class Args Ret Bind(std::functionRet(Args) \u0026f, typename std::enable_if std::is_objectRet{} \u0026\u0026 std::is_pointerArgs{} \u0026\u0026 std::is_convertibleT, typename std::remove_pointerArgs::type{} \u0026\u0026 std::is_base_ofOptionalBase, Ret{}::type * = 0) const { return f(managed); } private: T* managed; }; And to show that it verifies the monad laws (which is more than you can say about Java’s implementation)\n#include #include #include \"Optional.h\"int main() { std::functionOptionalint(int*) f = [](int* v){ if(v == nullptr) { return Optionalint(-1); } else if (*v == 2) { return Optionalint(); } else { return Optionalint(*v + 1); } }; int * one = new int(1); int * two = new int(2); cout  (Optionalint{2}.Bindint(f) == f(two))  std::endl; cout  (Optionalint{1}.Bindint(f) == f(one))  std::endl; cout  (Optionalint{nullptr}.Bindint(f) == f(nullptr))  std::endl; //doesn't work in java Option type } Happy programming!\n","wordCount":"632","inLanguage":"en","datePublished":"2017-02-23T08:38:14-05:00","dateModified":"2017-02-23T08:38:14-05:00","author":{"@type":"Person","name":"Robert Underwood"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://robertu94.github.io/2017/02/23/surprisingly-functional.html"},"publisher":{"@type":"Organization","name":"systems++","logo":{"@type":"ImageObject","url":"http://robertu94.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://robertu94.github.io/ accesskey=h title="systems++ (Alt + H)">systems++</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=http://robertu94.github.io/about.html title="About Me">
<span>About Me</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/guides.html title=Guides>
<span>Guides</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/learning.html title="Learning To Learn">
<span>Learning To Learn</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/presentations.html title=Presentations>
<span>Presentations</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=http://robertu94.github.io/>Home</a></div>
<h1 class=post-title>
Surprisingly Functional
</h1>
<div class=post-meta><span title="2017-02-23 08:38:14 -0500 -0500">February 23, 2017</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;632 words&nbsp;·&nbsp;Robert Underwood
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#the-shell-and-endomorphisms>The Shell and Endomorphisms</a></li>
<li><a href=#of-optional-types-and-pointers>of Optional types and Pointers</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</details>
</div>
<div class=post-content><p>Functional programming is a surprisingly useful programming paradigm.
The best aspects of functional programming have this odd habit of showing in places you would never expect.</p>
<h2 id=the-shell-and-endomorphisms>The Shell and Endomorphisms<a hidden class=anchor aria-hidden=true href=#the-shell-and-endomorphisms>#</a></h2>
<p>Arguably one of the most powerful features of the Unix shell is the pipe.
It is one of the core building blocks of the Unix philosophy of many small tools working together each doing one thing well.
However, long before Unix, the idea of the endomorphisms was developed.
The endomorphisms are a cornerstone of functional programming and I would argue why the pipe is so powerful.</p>
<p>A few rough definitions:</p>
<ul>
<li>A <code>morphism</code> is &ldquo;A structure preserving map from one type to another&rdquo; For example, functions are morphism.</li>
<li>A <code>endomorphism</code> is a morphism for which the co-domain (or range) is the domain of the morphism.</li>
</ul>
<p>In functional programming, endomorphisms are useful because they are can be composed in arbitrary order.
That is not to say that they are associative, only that the output of the function is well formed regardless of how they are composed.</p>
<p>Now consider what a standard Unix process uses as input and output:
They accept text as input.
They and emit text as output.
In other words, they are endomorphisms.</p>
<p>Which brings us to the pipe operator.
Pipes take take the standard output of one processes and use it as the standard input to another process.
So in essence, pipe is the composition operator of shell programming.
With compositions and endomorphisms you will go far.</p>
<h2 id=of-optional-types-and-pointers>of Optional types and Pointers<a hidden class=anchor aria-hidden=true href=#of-optional-types-and-pointers>#</a></h2>
<p>Pointers are the source of many a computer science student&rsquo;s frustration.
However, used wisely, they can be used to implement an moadic Optional type.</p>
<p>To be a monad, a type must:</p>
<ol>
<li>be parameterized by a specific type</li>
<li>have a unit function that converts an instance of the type to an instance of the monad</li>
<li>have a bind operation that takes a instance of monad type and return another monad type</li>
</ol>
<p>A couple observations from the bowels of standards for C and C++:</p>
<ul>
<li><code>free(nullptr);</code> and <code>delete nullptr;</code> both perform no operation.</li>
<li><code>NULL</code> and its C++11 cousin <code>nullptr</code> evaluates to false, all other pointers evaluate to true.</li>
</ul>
<p>With these two facts we can write a type generic Optional monad (see this <a href=https://github.com/robertu94/optional>repository</a>) for a full implementation).</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=c1>//in Optional.h
</span><span class=c1></span><span class=k>class</span> <span class=nc>OptionalBase</span> <span class=p>{</span>
  <span class=c1>// for type safety
</span><span class=c1></span><span class=k>public</span><span class=o>:</span>
  <span class=n>OptionalBase</span><span class=p>()</span> <span class=o>=</span> <span class=k>default</span><span class=p>;</span>
  <span class=k>virtual</span> <span class=o>~</span><span class=n>OptionalBase</span><span class=p>()</span> <span class=o>=</span> <span class=k>default</span><span class=p>;</span>
<span class=p>};</span>

<span class=k>template</span> <span class=o>&lt;</span><span class=k>class</span> <span class=nc>T</span><span class=o>&gt;</span>
<span class=k>class</span> <span class=nc>Optional</span><span class=o>:</span> <span class=k>public</span> <span class=n>OptionalBase</span>
<span class=p>{</span>
<span class=k>public</span><span class=o>:</span>
	<span class=n>Optional</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>()</span> <span class=o>:</span> <span class=n>OptionalBase</span><span class=p>(),</span> <span class=n>managed</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span> <span class=p>{}</span>
	<span class=n>Optional</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=n>T</span> <span class=n>v</span><span class=p>)</span> <span class=o>:</span> <span class=n>OptionalBase</span><span class=p>(),</span> <span class=n>managed</span><span class=p>(</span><span class=k>new</span> <span class=n>T</span><span class=p>(</span><span class=n>v</span><span class=p>))</span> <span class=p>{}</span>
	<span class=n>Optional</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=n>T</span><span class=o>*</span> <span class=n>v</span><span class=p>)</span> <span class=o>:</span> <span class=n>OptionalBase</span><span class=p>(),</span> <span class=n>managed</span><span class=p>((</span><span class=n>v</span><span class=p>)</span><span class=o>?</span> <span class=k>new</span> <span class=n>T</span><span class=p>(</span><span class=o>*</span><span class=n>v</span><span class=p>)</span> <span class=o>:</span> <span class=k>nullptr</span><span class=p>)</span> <span class=p>{}</span>
	<span class=n>Optional</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=k>const</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>)</span>
		<span class=o>:</span> <span class=n>OptionalBase</span><span class=p>(),</span> <span class=n>managed</span><span class=p>((</span><span class=n>v</span><span class=p>.</span><span class=n>managed</span><span class=p>)</span> <span class=o>?</span> <span class=k>new</span> <span class=n>T</span><span class=p>(</span><span class=o>*</span><span class=n>v</span><span class=p>.</span><span class=n>managed</span><span class=p>)</span> <span class=o>:</span> <span class=k>nullptr</span><span class=p>)</span> <span class=p>{}</span>
	<span class=o>~</span><span class=n>Optional</span><span class=p>()</span> <span class=p>{</span><span class=k>delete</span> <span class=n>managed</span><span class=p>;}</span>
	<span class=n>Optional</span><span class=o>&amp;</span> <span class=k>operator</span><span class=o>=</span> <span class=p>(</span><span class=k>const</span> <span class=n>Optional</span><span class=o>&amp;</span> <span class=n>rhs</span><span class=p>)</span>
	<span class=p>{</span>
		<span class=k>if</span><span class=p>(</span><span class=o>&amp;</span><span class=n>rhs</span> <span class=o>==</span> <span class=k>this</span><span class=p>)</span> <span class=k>return</span> <span class=o>*</span><span class=k>this</span><span class=p>;</span>
		<span class=k>delete</span> <span class=n>managed</span><span class=p>;</span>
		<span class=n>managed</span> <span class=o>=</span> <span class=p>((</span><span class=n>rhs</span><span class=p>.</span><span class=n>managed</span><span class=p>)</span> <span class=o>?</span> <span class=p>(</span><span class=k>new</span> <span class=n>T</span><span class=p>(</span><span class=n>rhs</span><span class=p>.</span><span class=n>managed</span><span class=p>))</span><span class=o>:</span> <span class=p>(</span><span class=k>nullptr</span><span class=p>));</span>
		<span class=k>return</span> <span class=o>*</span><span class=k>this</span><span class=p>;</span>
	<span class=p>}</span>
	<span class=kt>bool</span> <span class=k>operator</span><span class=o>==</span><span class=p>(</span><span class=k>const</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>rhs</span><span class=p>)</span> <span class=p>{</span>
		<span class=k>if</span> <span class=p>(</span><span class=n>managed</span> <span class=o>==</span> <span class=k>nullptr</span> <span class=o>&amp;&amp;</span> <span class=n>rhs</span><span class=p>.</span><span class=n>managed</span> <span class=o>==</span> <span class=k>nullptr</span><span class=p>)</span>
			<span class=k>return</span> <span class=nb>true</span><span class=p>;</span> <span class=c1>// empty == empty
</span><span class=c1></span>		<span class=k>else</span> <span class=nf>if</span> <span class=p>(</span><span class=n>managed</span> <span class=o>==</span> <span class=k>nullptr</span> <span class=o>||</span> <span class=n>rhs</span><span class=p>.</span><span class=n>managed</span> <span class=o>==</span> <span class=k>nullptr</span><span class=p>)</span>
			<span class=k>return</span> <span class=nb>false</span><span class=p>;</span> <span class=c1>// empty != full
</span><span class=c1></span>		<span class=k>else</span>
			<span class=k>return</span> <span class=o>*</span><span class=n>managed</span> <span class=o>==</span> <span class=o>*</span><span class=n>rhs</span><span class=p>.</span><span class=n>managed</span><span class=p>;</span>
	<span class=p>}</span>
	<span class=k>template</span> <span class=o>&lt;</span><span class=k>class</span> <span class=nc>Ret</span><span class=p>,</span> <span class=k>class</span> <span class=nc>Args</span><span class=o>&gt;</span>
		<span class=n>Ret</span> <span class=n>Bind</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>function</span><span class=o>&lt;</span><span class=n>Ret</span><span class=p>(</span><span class=n>Args</span><span class=p>)</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>f</span><span class=p>,</span>
				<span class=k>typename</span> <span class=n>std</span><span class=o>::</span><span class=n>enable_if</span><span class=o>&lt;</span>
				<span class=n>std</span><span class=o>::</span><span class=n>is_object</span><span class=o>&lt;</span><span class=n>Ret</span><span class=o>&gt;</span><span class=p>{}</span> <span class=o>&amp;&amp;</span> <span class=n>std</span><span class=o>::</span><span class=n>is_pointer</span><span class=o>&lt;</span><span class=n>Args</span><span class=o>&gt;</span><span class=p>{}</span> <span class=o>&amp;&amp;</span>
				<span class=n>std</span><span class=o>::</span><span class=n>is_convertible</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span> <span class=k>typename</span> <span class=n>std</span><span class=o>::</span><span class=n>remove_pointer</span><span class=o>&lt;</span><span class=n>Args</span><span class=o>&gt;::</span><span class=n>type</span><span class=o>&gt;</span><span class=p>{}</span> <span class=o>&amp;&amp;</span>
				<span class=n>std</span><span class=o>::</span><span class=n>is_base_of</span><span class=o>&lt;</span><span class=n>OptionalBase</span><span class=p>,</span> <span class=n>Ret</span><span class=o>&gt;</span><span class=p>{}</span><span class=o>&gt;::</span><span class=n>type</span> <span class=o>*</span> <span class=o>=</span> <span class=mi>0</span><span class=p>)</span> <span class=k>const</span> <span class=p>{</span>
			<span class=k>return</span> <span class=nf>f</span><span class=p>(</span><span class=n>managed</span><span class=p>);</span>
		<span class=p>}</span>
<span class=k>private</span><span class=o>:</span>
	<span class=n>T</span><span class=o>*</span> <span class=n>managed</span><span class=p>;</span>
<span class=p>};</span>
</code></pre></div><p>And to show that it verifies the monad laws (which is more than you can say about <a href=https://dzone.com/articles/whats-wrong-java-8-part-iv>Java&rsquo;s</a> implementation)</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=cp>#include</span> <span class=cpf>&lt;iomanip&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;funtional&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&#34;Optional.h&#34;</span><span class=cp>
</span><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
<span class=p>{</span>
	<span class=n>std</span><span class=o>::</span><span class=n>function</span><span class=o>&lt;</span><span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=o>&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=p>[](</span><span class=kt>int</span><span class=o>*</span> <span class=n>v</span><span class=p>){</span>
			<span class=k>if</span><span class=p>(</span><span class=n>v</span> <span class=o>==</span> <span class=k>nullptr</span><span class=p>)</span>
			<span class=p>{</span>
				<span class=k>return</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>);</span>
			<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=o>*</span><span class=n>v</span> <span class=o>==</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
				<span class=k>return</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>();</span>
			<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
				<span class=k>return</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=o>*</span><span class=n>v</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
			<span class=p>}</span>
		<span class=p>};</span>
	<span class=kt>int</span> <span class=o>*</span> <span class=n>one</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
	<span class=kt>int</span> <span class=o>*</span> <span class=n>two</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>

	<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>{</span><span class=mi>2</span><span class=p>}.</span><span class=n>Bind</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=o>==</span> <span class=n>f</span><span class=p>(</span><span class=n>two</span><span class=p>))</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
	<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>{</span><span class=mi>1</span><span class=p>}.</span><span class=n>Bind</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=o>==</span> <span class=n>f</span><span class=p>(</span><span class=n>one</span><span class=p>))</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
	<span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>{</span><span class=k>nullptr</span><span class=p>}.</span><span class=n>Bind</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=o>==</span> <span class=n>f</span><span class=p>(</span><span class=k>nullptr</span><span class=p>))</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span> <span class=c1>//doesn&#39;t work in java Option type
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>Happy programming!</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=http://robertu94.github.io/tags/shell.html>shell</a></li>
<li><a href=http://robertu94.github.io/tags/c++11.html>C++11</a></li>
<li><a href=http://robertu94.github.io/tags/functional-programming.html>functional programming</a></li>
</ul>
<nav class=paginav>
<a class=prev href=http://robertu94.github.io/2017/04/30/smart-pool.html>
<span class=title>« Prev</span>
<br>
<span>Smart Pool</span>
</a>
<a class=next href=http://robertu94.github.io/2017/01/29/faster-than-light.html>
<span class=title>Next »</span>
<br>
<span>Faster than light</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2024 <a href=http://robertu94.github.io/>systems++</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>