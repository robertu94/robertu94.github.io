<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Updating LibPressio with Spack | systems++</title>
<meta name=keywords content>
<meta name=description content="#tl;dr
# set NEW_VERSION to the desired version cd $SPACK_ROOT git pull cd $(spack repo list | grep robertu94 | sed -E 's/robertu94[[:space:]]+//') && git pull spack install libpressio-tools ^libpressio${NEW_VERSION} spack load libpressio-tools ^libpressio${NEW_VERSION} libpressio is now Mainline LibPressio is now in the mainline version of spack (as of commit da6aeaad44e434da5563d32f2fa9900de362b2ed, October 17, 2022). You no longer need to add robertu94_packages unless you need a development version. You can either spack repo rm robertu94, or the next pull of robertu94_packages will include a dummy package to refer back to the builtin version.">
<meta name=author content="Robert Underwood">
<link rel=canonical href=http://robertu94.github.io/guides/updating_libpressio_with_spack.html>
<meta name=google-site-verification content="G-9KQE44SX6K">
<link crossorigin=anonymous href=/assets/css/stylesheet.57f29198e62b3a8f07d37acaca0427bafb684416046b823f5a616bd858bb4af1.css integrity="sha256-V/KRmOYrOo8H03rKygQnuvtoRBYEa4I/WmFr2Fi7SvE=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.baa4f2053c75d0009e9309aae8f8a8959f5e0372e88f80cdf2951a9533d71ce2.js integrity="sha256-uqTyBTx10ACekwmq6PiolZ9eA3Loj4DN8pUalTPXHOI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://robertu94.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=http://robertu94.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=http://robertu94.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=http://robertu94.github.io/apple-touch-icon.png>
<link rel=mask-icon href=http://robertu94.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9KQE44SX6K"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-9KQE44SX6K',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Updating LibPressio with Spack">
<meta property="og:description" content="#tl;dr
# set NEW_VERSION to the desired version cd $SPACK_ROOT git pull cd $(spack repo list | grep robertu94 | sed -E 's/robertu94[[:space:]]+//') && git pull spack install libpressio-tools ^libpressio${NEW_VERSION} spack load libpressio-tools ^libpressio${NEW_VERSION} libpressio is now Mainline LibPressio is now in the mainline version of spack (as of commit da6aeaad44e434da5563d32f2fa9900de362b2ed, October 17, 2022). You no longer need to add robertu94_packages unless you need a development version. You can either spack repo rm robertu94, or the next pull of robertu94_packages will include a dummy package to refer back to the builtin version.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://robertu94.github.io/guides/updating_libpressio_with_spack.html"><meta property="article:section" content="guides">
<meta property="article:published_time" content="2022-09-13T00:00:00+00:00">
<meta property="article:modified_time" content="2022-09-13T00:00:00+00:00"><meta property="og:site_name" content="Systems++">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Updating LibPressio with Spack">
<meta name=twitter:description content="#tl;dr
# set NEW_VERSION to the desired version cd $SPACK_ROOT git pull cd $(spack repo list | grep robertu94 | sed -E 's/robertu94[[:space:]]+//') && git pull spack install libpressio-tools ^libpressio${NEW_VERSION} spack load libpressio-tools ^libpressio${NEW_VERSION} libpressio is now Mainline LibPressio is now in the mainline version of spack (as of commit da6aeaad44e434da5563d32f2fa9900de362b2ed, October 17, 2022). You no longer need to add robertu94_packages unless you need a development version. You can either spack repo rm robertu94, or the next pull of robertu94_packages will include a dummy package to refer back to the builtin version.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Updating LibPressio with Spack","item":"http://robertu94.github.io/guides/updating_libpressio_with_spack.html"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Updating LibPressio with Spack","name":"Updating LibPressio with Spack","description":"#tl;dr\n# set NEW_VERSION to the desired version cd $SPACK_ROOT git pull cd $(spack repo list | grep robertu94 | sed -E \u0026#39;s/robertu94[[:space:]]+//\u0026#39;) \u0026amp;\u0026amp; git pull spack install libpressio-tools ^libpressio${NEW_VERSION} spack load libpressio-tools ^libpressio${NEW_VERSION} libpressio is now Mainline LibPressio is now in the mainline version of spack (as of commit da6aeaad44e434da5563d32f2fa9900de362b2ed, October 17, 2022). You no longer need to add robertu94_packages unless you need a development version. You can either spack repo rm robertu94, or the next pull of robertu94_packages will include a dummy package to refer back to the builtin version.","keywords":[],"articleBody":"#tl;dr\n# set NEW_VERSION to the desired version cd $SPACK_ROOT git pull cd $(spack repo list | grep robertu94 | sed -E 's/robertu94[[:space:]]+//') \u0026\u0026 git pull spack install libpressio-tools ^libpressio${NEW_VERSION} spack load libpressio-tools ^libpressio${NEW_VERSION} libpressio is now Mainline LibPressio is now in the mainline version of spack (as of commit da6aeaad44e434da5563d32f2fa9900de362b2ed, October 17, 2022). You no longer need to add robertu94_packages unless you need a development version. You can either spack repo rm robertu94, or the next pull of robertu94_packages will include a dummy package to refer back to the builtin version.\nYou can now update like so (without robertu94_packages)\ncd $SPACK_ROOT git pull spack install libpressio-tools ^libpressio${NEW_VERSION} spack load libpressio-tools ^libpressio${NEW_VERSION} the longer version Updating LibPressio with spack generally has several steps:\n update your spack install git pull $SPACK_ROOT   if your HPC system has updated (i.e. after system-wide maintenance) you might need to adjust the modules loaded for your compiler, MPI, or other critical external packages. See the guides for the latest guides on the systems that I use. Be sure to check the spack release notes for other configuration changes that might be needed  update your robertu94_packages with cd $(spack repo list | grep robertu94 | sed -E 's/robertu94[[:space:]]+//') \u0026\u0026 git pull   This may not be necessary for many users after LibPressio is merged into upstream Spack. Hopefully in Fall 2022. Users working on development versions of these packages will still want to use the 3rd party repository After LibPressio is merged into upstream spack. Users may want to spack repo remove robertu94 to prefer using the stable versions in upstream spack.  Spack install your new version. If you passed variants to your install command, be sure to include them again here. A good place to start is spack install libpressio-tools ^ libpressio+sz Spack load the built libraries.   this can be done via the hash of the built package (which is robust to new versions being built) It can also be done via spack load libpressio-tools. The later may error if a new version is added. If you get an error regarding multiple versions, you can uninstall one of the older versions with spack uninstall $HASH where $HASH is the hash of the older version or by requesting the specific version. You can list available versions and their configuration with spack find -lvd --loaded  Changelog  19 October 2022 – libpressio has been merged in upstream spack and no longer needs robertu94_packages in most cases.  ","wordCount":"406","inLanguage":"en","datePublished":"2022-09-13T00:00:00Z","dateModified":"2022-09-13T00:00:00Z","author":{"@type":"Person","name":"Robert Underwood"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://robertu94.github.io/guides/updating_libpressio_with_spack.html"},"publisher":{"@type":"Organization","name":"systems++","logo":{"@type":"ImageObject","url":"http://robertu94.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://robertu94.github.io/ accesskey=h title="systems++ (Alt + H)">systems++</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=http://robertu94.github.io/about.html title="About Me">
<span>About Me</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/guides.html title=Guides>
<span>Guides</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/learning.html title="Learning To Learn">
<span>Learning To Learn</span>
</a>
</li>
<li>
<a href=http://robertu94.github.io/presentations.html title=Presentations>
<span>Presentations</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=http://robertu94.github.io/>Home</a></div>
<h1 class=post-title>
Updating LibPressio with Spack
</h1>
<div class=post-meta><span title="2022-09-13 00:00:00 +0000 UTC">September 13, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;406 words&nbsp;·&nbsp;Robert Underwood
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><nav id=TableOfContents>
<ul>
<li><a href=#libpressio-is-now-mainline><code>libpressio</code> is now Mainline</a></li>
<li><a href=#the-longer-version>the longer version</a>
<ul>
<li><a href=#changelog>Changelog</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</details>
</div>
<div class=post-content><p>#tl;dr</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># set NEW_VERSION to the desired version</span>
<span class=nb>cd</span> <span class=nv>$SPACK_ROOT</span>
git pull 
<span class=nb>cd</span> <span class=k>$(</span>spack repo list <span class=p>|</span> grep robertu94 <span class=p>|</span> sed -E <span class=s1>&#39;s/robertu94[[:space:]]+//&#39;</span><span class=k>)</span> <span class=o>&amp;&amp;</span> git pull
spack install libpressio-tools ^libpressio<span class=si>${</span><span class=nv>NEW_VERSION</span><span class=si>}</span>
spack load libpressio-tools ^libpressio<span class=si>${</span><span class=nv>NEW_VERSION</span><span class=si>}</span>
</code></pre></div><h1 id=libpressio-is-now-mainline><code>libpressio</code> is now Mainline<a hidden class=anchor aria-hidden=true href=#libpressio-is-now-mainline>#</a></h1>
<p>LibPressio is now in the mainline version of spack (as of commit <code>da6aeaad44e434da5563d32f2fa9900de362b2ed</code>, October 17, 2022). You no longer need to add <code>robertu94_packages</code> unless you need a development version. You can either <code>spack repo rm robertu94</code>, or the next pull of <code>robertu94_packages</code> will include a dummy package to refer back to the builtin version.</p>
<p>You can now update like so (without <code>robertu94_packages</code>)</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>cd $SPACK_ROOT
git pull
spack install libpressio-tools ^libpressio${NEW_VERSION}
spack load libpressio-tools ^libpressio${NEW_VERSION}
</code></pre></div><h1 id=the-longer-version>the longer version<a hidden class=anchor aria-hidden=true href=#the-longer-version>#</a></h1>
<p>Updating LibPressio with spack generally has several steps:</p>
<ol>
<li>update your spack install <code>git pull $SPACK_ROOT</code></li>
</ol>
<ul>
<li>if your HPC system has updated (i.e. after system-wide maintenance) you might need to adjust the modules loaded for your compiler, MPI, or other critical external packages. See the guides for the latest guides on the systems that I use.</li>
<li>Be sure to check the spack release notes for other configuration changes that might be needed</li>
</ul>
<ol start=2>
<li>update your <code>robertu94_packages</code> with <code>cd $(spack repo list | grep robertu94 | sed -E 's/robertu94[[:space:]]+//') && git pull</code></li>
</ol>
<ul>
<li>This may not be necessary for many users after <a href=https://github.com/spack/spack/pull/32630>LibPressio is merged into upstream Spack</a>. Hopefully in Fall 2022. Users working on development versions of these packages will still want to use the 3rd party repository</li>
<li>After LibPressio is merged into upstream spack. Users may want to <code>spack repo remove robertu94</code> to prefer using the stable versions in upstream spack.</li>
</ul>
<ol start=3>
<li>Spack install your new version. If you passed variants to your install command, be sure to include them again here. A good place to start is <code>spack install libpressio-tools ^ libpressio+sz</code></li>
<li>Spack load the built libraries.</li>
</ol>
<ul>
<li>this can be done via the hash of the built package (which is robust to new versions being built)</li>
<li>It can also be done via <code>spack load libpressio-tools</code>. The later may error if a new version is added. If you get an error regarding multiple versions, you can uninstall one of the older versions with <code>spack uninstall $HASH</code> where <code>$HASH</code> is the hash of the older version or by requesting the specific version.</li>
<li>You can list available versions and their configuration with <code>spack find -lvd --loaded</code></li>
</ul>
<h2 id=changelog>Changelog<a hidden class=anchor aria-hidden=true href=#changelog>#</a></h2>
<ul>
<li>19 October 2022 &ndash; libpressio has been merged in upstream spack and no longer needs robertu94_packages in most cases.</li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2024 <a href=http://robertu94.github.io/>systems++</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>